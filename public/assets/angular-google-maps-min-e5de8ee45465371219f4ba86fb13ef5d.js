function InfoBox(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&(t.visible="undefined"==typeof t.isHidden?!0:!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function ClusterIcon(t,e){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function Cluster(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,t.getStyles())}function MarkerClusterer(t,e,i){this.extend(MarkerClusterer,google.maps.OverlayView),e=e||[],i=i||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.title_=i.title||"",this.zoomOnClick_=!0,void 0!==i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,void 0!==i.averageCenter&&(this.averageCenter_=i.averageCenter),this.ignoreHidden_=!1,void 0!==i.ignoreHidden&&(this.ignoreHidden_=i.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==i.enableRetinaIcons&&(this.enableRetinaIcons_=i.enableRetinaIcons),this.imagePath_=i.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=i.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=i.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=i.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=i.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=i.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=i.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}function inherits(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t}function MarkerLabel_(t,e){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(e)}function MarkerWithLabel(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new MarkerLabel_(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}(function(){angular.element(document).ready(function(){return(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)&&(google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},google.maps.InfoWindow.prototype.close=function(){this._isOpen=!1,this._close()},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},window.InfoBox)?(window.InfoBox.prototype._open=window.InfoBox.prototype.open,window.InfoBox.prototype._close=window.InfoBox.prototype.close,window.InfoBox.prototype._isOpen=!1,window.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},window.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},window.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t}):void 0})}).call(this),function(){_.intersectionObjects=function(t,e,i){var o;return null==i&&(i=void 0),o=_.map(t,function(t){return _.find(e,function(e){return null!=i?i(t,e):_.isEqual(t,e)})}),_.filter(o,function(t){return null!=t})}}.call(this),function(){!function(){var t;return t=angular.module("google-maps",[]),t.factory("debounce",["$timeout",function(t){return function(e){var i;return i=0,function(){var o,n,r;return r=this,o=arguments,i++,n=function(t){return function(){return t===i?e.apply(r,o):void 0}}(i),t(n,0,!0)}}}])}()}.call(this),function(){this.ngGmapModule=function(t,e){var i,o;return null==e&&(e=function(){}),"string"==typeof t&&(t=t.split(".")),i=this[o=t.shift()]||(this[o]={}),i.ngGmapModule||(i.ngGmapModule=this.ngGmapModule),t.length?i.ngGmapModule(t,e):e.call(i)}}.call(this),function(){angular.module("google-maps").factory("array-sync",["add-events",function(t){var e;return e=function(e,i,o){var n,r,s,a;return n=!1,s=i.$eval(o),r=t(e,{set_at:function(t){var i;return!n&&(i=e.getAt(t),i&&i.lng&&i.lat)?(s[t].latitude=i.lat(),s[t].longitude=i.lng()):void 0},insert_at:function(t){var i;return!n&&(i=e.getAt(t),i&&i.lng&&i.lat)?s.splice(t,0,{latitude:i.lat(),longitude:i.lng()}):void 0},remove_at:function(t){return n?void 0:s.splice(t,1)}}),a=i.$watchCollection(o,function(t){var i,o,r,s,a,l,h;if(n=!0,a=e,t){for(i=0,l=a.getLength(),r=t.length,o=Math.min(l,r),s=void 0;o>i;)h=a.getAt(i),s=t[i],(h.lat()!==s.latitude||h.lng()!==s.longitude)&&a.setAt(i,new google.maps.LatLng(s.latitude,s.longitude)),i++;for(;r>i;)s=t[i],a.push(new google.maps.LatLng(s.latitude,s.longitude)),i++;for(;l>i;)a.pop(),i++}return n=!1}),function(){return r&&(r(),r=null),a?(a(),a=null):void 0}}}])}.call(this),function(){angular.module("google-maps").factory("add-events",["$timeout",function(t){var e,i;return e=function(e,i,o){return google.maps.event.addListener(e,i,function(){return o.apply(this,arguments),t(function(){},!0)})},i=function(t,i,o){var n;return o?e(t,i,o):(n=[],angular.forEach(i,function(i,o){return n.push(e(t,o,i))}),function(){return angular.forEach(n,function(t){return _.isFunction(t)&&t(),null!==t.e&&_.isFunction(t.e)?t.e():void 0}),n=null})}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};this.ngGmapModule("oo",function(){var e;return e=["extended","included"],this.BaseObject=function(){function i(){}return i.extend=function(i){var o,n,r;for(o in i)n=i[o],t.call(e,o)<0&&(this[o]=n);return null!=(r=i.extended)&&r.apply(0),this},i.include=function(i){var o,n,r;for(o in i)n=i[o],t.call(e,o)<0&&(this.prototype[o]=n);return null!=(r=i.included)&&r.apply(0),this},i}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.managers",function(){return this.ClustererMarkerManager=function(e){function o(e,i,n){this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.add=t(this.add,this);var r;o.__super__.constructor.call(this),r=this,this.opt_options=n,this.clusterer=null!=n&&void 0===i?new MarkerClusterer(e,void 0,n):null!=n&&null!=i?new MarkerClusterer(e,i,n):new MarkerClusterer(e),this.clusterer.setIgnoreHidden(!0),this.$log=directives.api.utils.Logger,this.noDrawOnSingleAddRemoves=!0,this.$log.info(this)}return i(o,e),o.prototype.add=function(t){return this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves)},o.prototype.addMany=function(t){return this.clusterer.addMarkers(t)},o.prototype.remove=function(t){return this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves)},o.prototype.removeMany=function(t){return this.clusterer.addMarkers(t)},o.prototype.draw=function(){return this.clusterer.repaint()},o.prototype.clear=function(){return this.clusterer.clearMarkers(),this.clusterer.repaint()},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.managers",function(){return this.MarkerManager=function(e){function o(e){this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.add=t(this.add,this);var i;o.__super__.constructor.call(this),i=this,this.gMap=e,this.gMarkers=[],this.$log=directives.api.utils.Logger,this.$log.info(this)}return i(o,e),o.prototype.add=function(t,e){return this.handleOptDraw(t,e,!0),this.gMarkers.push(t)},o.prototype.addMany=function(t){var e,i,o,n;for(n=[],i=0,o=t.length;o>i;i++)e=t[i],n.push(this.add(e));return n},o.prototype.remove=function(t,e){var i,o;return this.handleOptDraw(t,e,!1),e?(i=void 0,null!=this.gMarkers.indexOf?i=this.gMarkers.indexOf(t):(o=0,_.find(this.gMarkers,function(e){o+=1,e===t&&(i=o)})),null!=i?this.gMarkers.splice(i,1):void 0):void 0},o.prototype.removeMany=function(){var t,e,i,o,n;for(o=this.gMarkers,n=[],e=0,i=o.length;i>e;e++)t=o[e],n.push(this.remove(t));return n},o.prototype.draw=function(){var t,e,i,o,n,r,s,a,l,h=this;for(t=[],a=this.gMarkers,i=function(e){return e.isDrawn?void 0:e.doAdd?e.setMap(h.gMap):t.push(e)},o=0,r=a.length;r>o;o++)e=a[o],i(e);for(l=[],n=0,s=t.length;s>n;n++)e=t[n],l.push(this.remove(e,!0));return l},o.prototype.clear=function(){var t,e,i,o;for(o=this.gMarkers,e=0,i=o.length;i>e;e++)t=o[e],t.setMap(null);return delete this.gMarkers,this.gMarkers=[]},o.prototype.handleOptDraw=function(t,e,i){return e===!0?(t.setMap(i?this.gMap:null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=i)},o}(oo.BaseObject)})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.AsyncProcessor={handleLargeArray:function(t,e,i,o,n,r){var s;return null==n&&(n=100),null==r&&(r=0),void 0===t||t.length<=0?void o():(s=function(){var a,l;for(a=n,l=r;a--&&l<t.length;)e(t[l]),++l;return l<t.length?(r=l,null!=i&&i(),setTimeout(s,1)):o()})()}}})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.ChildEvents={onChildCreation:function(){}}})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.GmapUtil={getLabelPositionPoint:function(t){var e,i;return void 0===t?void 0:(t=/^([\d\.]+)\s([\d\.]+)$/.exec(t),e=t[1],i=t[2],e&&i?new google.maps.Point(e,i):void 0)},createMarkerOptions:function(t,e,i,o){var n;return null==o&&(o=void 0),null==i&&(i={}),n=angular.extend({},i,{position:null!=i.position?i.position:new google.maps.LatLng(t.latitude,t.longitude),icon:null!=i.icon?i.icon:e,visible:null!=i.visible?i.visible:null!=t.latitude&&null!=t.longitude}),null!=o&&(n.map=o),n},createWindowOptions:function(t,e,i,o){return null!=i&&null!=o?angular.extend({},o,{content:null!=o.content?o.content:i,position:null!=o.position?o.position:angular.isObject(t)?t.getPosition():new google.maps.LatLng(e.coords.latitude,e.coords.longitude)}):o?o:void 0},defaultDelay:50}})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};this.ngGmapModule("directives.api.utils",function(){return this.Linked=function(t){function i(t,e,i,o){this.scope=t,this.element=e,this.attrs=i,this.ctrls=o}return e(i,t),i}(oo.BaseObject)})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){var t;return this.Logger={logger:void 0,doLog:!1,info:function(e){return t.doLog?null!=t.logger?t.logger.info(e):console.info(e):void 0},error:function(e){return t.doLog?null!=t.logger?t.logger.error(e):console.error(e):void 0}},t=this.Logger})}.call(this),function(){this.ngGmapModule("directives.api.utils",function(){return this.ModelsWatcher={didModelsChange:function(t,e){var i,o;return _.isArray(t)?t===e?!1:(o=_.intersectionObjects(t,e).length!==e.length,i=!0,o||(i=t.length!==e.length),i):(directives.api.utils.Logger.error("models property must be an array newValue of: "+t.toString()+" is not!!"),!1)}}})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.child",function(){return this.MarkerLabelChildModel=function(e){function o(e,i){this.destroy=t(this.destroy,this),this.draw=t(this.draw,this),this.setPosition=t(this.setPosition,this),this.setZIndex=t(this.setZIndex,this),this.setVisible=t(this.setVisible,this),this.setAnchor=t(this.setAnchor,this),this.setMandatoryStyles=t(this.setMandatoryStyles,this),this.setStyles=t(this.setStyles,this),this.setContent=t(this.setContent,this),this.setTitle=t(this.setTitle,this),this.getSharedCross=t(this.getSharedCross,this);var n,r,s;o.__super__.constructor.call(this),n=this,this.marker=e,this.marker.set("labelContent",i.labelContent),this.marker.set("labelAnchor",this.getLabelPositionPoint(i.labelAnchor)),this.marker.set("labelClass",i.labelClass||"labels"),this.marker.set("labelStyle",i.labelStyle||{opacity:100}),this.marker.set("labelInBackground",i.labelInBackground||!1),i.labelVisible||this.marker.set("labelVisible",!0),i.raiseOnDrag||this.marker.set("raiseOnDrag",!0),i.clickable||this.marker.set("clickable",!0),i.draggable||this.marker.set("draggable",!1),i.optimized||this.marker.set("optimized",!1),i.crossImage=null!=(r=i.crossImage)?r:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",i.handCursor=null!=(s=i.handCursor)?s:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",this.markerLabel=new MarkerLabel_(this.marker,i.crossImage,i.handCursor),this.marker.set("setMap",function(t){return google.maps.Marker.prototype.setMap.apply(this,arguments),n.markerLabel.setMap(t)}),this.marker.setMap(this.marker.getMap())}return i(o,e),o.include(directives.api.utils.GmapUtil),o.prototype.getSharedCross=function(t){return this.markerLabel.getSharedCross(t)},o.prototype.setTitle=function(){return this.markerLabel.setTitle()},o.prototype.setContent=function(){return this.markerLabel.setContent()},o.prototype.setStyles=function(){return this.markerLabel.setStyles()},o.prototype.setMandatoryStyles=function(){return this.markerLabel.setMandatoryStyles()},o.prototype.setAnchor=function(){return this.markerLabel.setAnchor()},o.prototype.setVisible=function(){return this.markerLabel.setVisible()},o.prototype.setZIndex=function(){return this.markerLabel.setZIndex()},o.prototype.setPosition=function(){return this.markerLabel.setPosition()},o.prototype.draw=function(){return this.markerLabel.draw()},o.prototype.destroy=function(){return null!=this.markerLabel.labelDiv_.parentNode&&null!=this.markerLabel.eventDiv_.parentNode?this.markerLabel.onRemove():void 0},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.child",function(){return this.MarkerChildModel=function(e){function o(e,i,o,n,r,s,a,l,h){var u,p=this;this.index=e,this.model=i,this.parentScope=o,this.gMap=n,this.defaults=s,this.doClick=a,this.gMarkerManager=l,this.watchDestroy=t(this.watchDestroy,this),this.setLabelOptions=t(this.setLabelOptions,this),this.isLabelDefined=t(this.isLabelDefined,this),this.setOptions=t(this.setOptions,this),this.setIcon=t(this.setIcon,this),this.setCoords=t(this.setCoords,this),this.destroy=t(this.destroy,this),this.maybeSetScopeValue=t(this.maybeSetScopeValue,this),this.createMarker=t(this.createMarker,this),this.setMyScope=t(this.setMyScope,this),u=this,this.iconKey=this.parentScope.icon,this.coordsKey=this.parentScope.coords,this.clickKey=this.parentScope.click(),this.labelContentKey=this.parentScope.labelContent,this.optionsKey=this.parentScope.options,this.labelOptionsKey=this.parentScope.labelOptions,this.myScope=this.parentScope.$new(!1),this.$injector=h,this.myScope.model=this.model,this.setMyScope(this.model,void 0,!0),this.createMarker(this.model),this.myScope.$watch("model",function(t,e){return t!==e?p.setMyScope(t,e):void 0},!0),this.$log=directives.api.utils.Logger,this.$log.info(u),this.watchDestroy(this.myScope)}return i(o,e),o.include(directives.api.utils.GmapUtil),o.prototype.setMyScope=function(t,e,i){var o=this;return null==e&&(e=void 0),null==i&&(i=!1),this.maybeSetScopeValue("icon",t,e,this.iconKey,this.evalModelHandle,i,this.setIcon),this.maybeSetScopeValue("coords",t,e,this.coordsKey,this.evalModelHandle,i,this.setCoords),this.maybeSetScopeValue("labelContent",t,e,this.labelContentKey,this.evalModelHandle,i),_.isFunction(this.clickKey)&&this.$injector?this.myScope.click=function(){return o.$injector.invoke(o.clickKey,void 0,{$markerModel:t})}:this.maybeSetScopeValue("click",t,e,this.clickKey,this.evalModelHandle,i),this.createMarker(t,e,i)},o.prototype.createMarker=function(t,e,i){var o=this;return null==e&&(e=void 0),null==i&&(i=!1),this.maybeSetScopeValue("options",t,e,this.optionsKey,function(t,e){var i;return void 0===t?void 0:(i="self"===e?t:t[e],void 0===i?i=void 0===e?o.defaults:o.myScope.options:i)},i,this.setOptions)},o.prototype.evalModelHandle=function(t,e){return void 0===t?void 0:"self"===e?t:t[e]},o.prototype.maybeSetScopeValue=function(t,e,i,o,n,r,s){var a,l;return null==s&&(s=void 0),void 0===i?(this.myScope[t]=n(e,o),void(r||null!=s&&s(this.myScope))):(l=n(i,o),a=n(e,o),a===l||this.myScope[t]===a||(this.myScope[t]=a,r)?void 0:(null!=s&&s(this.myScope),this.gMarkerManager.draw()))},o.prototype.destroy=function(){return this.myScope.$destroy()},o.prototype.setCoords=function(t){return t.$id===this.myScope.$id&&void 0!==this.gMarker?null!=t.coords?null==this.scope.coords.latitude||null==this.scope.coords.longitude?void this.$log.error("MarkerChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(this.model)):(this.gMarker.setPosition(new google.maps.LatLng(t.coords.latitude,t.coords.longitude)),this.gMarker.setVisible(null!=t.coords.latitude&&null!=t.coords.longitude),this.gMarkerManager.remove(this.gMarker),this.gMarkerManager.add(this.gMarker)):this.gMarkerManager.remove(this.gMarker):void 0},o.prototype.setIcon=function(t){return t.$id===this.myScope.$id&&void 0!==this.gMarker?(this.gMarkerManager.remove(this.gMarker),this.gMarker.setIcon(t.icon),this.gMarkerManager.add(this.gMarker),this.gMarker.setPosition(new google.maps.LatLng(t.coords.latitude,t.coords.longitude)),this.gMarker.setVisible(t.coords.latitude&&null!=t.coords.longitude)):void 0},o.prototype.setOptions=function(t){var e,i=this;return t.$id===this.myScope.$id&&(null!=this.gMarker&&(this.gMarkerManager.remove(this.gMarker),delete this.gMarker),null!=(e=t.coords)?e:"function"==typeof t.icon?t.icon(null!=t.options):void 0)?(this.opts=this.createMarkerOptions(t.coords,t.icon,t.options),delete this.gMarker,this.gMarker=this.isLabelDefined(t)?new MarkerWithLabel(this.setLabelOptions(this.opts,t)):new google.maps.Marker(this.opts),this.gMarkerManager.add(this.gMarker),google.maps.event.addListener(this.gMarker,"click",function(){return i.doClick&&null!=i.myScope.click?i.myScope.click():void 0})):void 0},o.prototype.isLabelDefined=function(t){return null!=t.labelContent},o.prototype.setLabelOptions=function(t,e){return t.labelAnchor=this.getLabelPositionPoint(e.labelAnchor),t.labelClass=e.labelClass,t.labelContent=e.labelContent,t},o.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){var t;return null!=e.gMarker&&(e.gMarkerManager.remove(e.gMarker),delete e.gMarker),t=void 0})},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.child",function(){return this.WindowChildModel=function(e){function o(e,i,o,n,r,s,a,l,h,u){this.element=h,null==u&&(u=!1),this.destroy=t(this.destroy,this),this.hideWindow=t(this.hideWindow,this),this.getLatestPosition=t(this.getLatestPosition,this),this.showWindow=t(this.showWindow,this),this.handleClick=t(this.handleClick,this),this.watchCoords=t(this.watchCoords,this),this.watchShow=t(this.watchShow,this),this.createGWin=t(this.createGWin,this),this.scope=e,this.googleMapsHandles=[],this.opts=i,this.mapCtrl=n,this.markerCtrl=r,this.isIconVisibleOnClick=o,this.initialMarkerVisibility=null!=this.markerCtrl?this.markerCtrl.getVisible():!1,this.$log=directives.api.utils.Logger,this.$http=s,this.$templateCache=a,this.$compile=l,this.createGWin(),null!=this.markerCtrl&&this.markerCtrl.setClickable(!0),this.handleClick(),this.watchShow(),this.watchCoords(),this.needToManualDestroy=u,this.$log.info(this)}return i(o,e),o.include(directives.api.utils.GmapUtil),o.prototype.createGWin=function(){var t,e,i=this;return null==this.gWin&&null!=this.markerCtrl&&(t=null!=this.opts?this.opts:{},e=null!=this.element&&_.isFunction(this.element.html)?this.element.html():this.element,this.opts=null!=this.markerCtrl?this.createWindowOptions(this.markerCtrl,this.scope,e,t):{}),null!=this.opts&&void 0===this.gWin?(this.gWin=this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?new window.InfoBox(this.opts):new google.maps.InfoWindow(this.opts),this.googleMapsHandles.push(google.maps.event.addListener(this.gWin,"closeclick",function(){return null!=i.markerCtrl&&i.markerCtrl.setVisible(i.initialMarkerVisibility),i.gWin.isOpen(!1),null!=i.scope.closeClick?i.scope.closeClick():void 0}))):void 0},o.prototype.watchShow=function(){var t=this;return this.scope.$watch("show",function(e){return e?t.showWindow():t.hideWindow()})},o.prototype.watchCoords=function(){var t,e=this;return t=null!=this.markerCtrl?this.scope.$parent:this.scope,t.$watch("coords",function(t,i){return t!==i?null==t?e.hideWindow():null==t.latitude||null==t.longitude?void e.$log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(e.model)):e.gWin.setPosition(new google.maps.LatLng(t.latitude,t.longitude)):void 0},!0)},o.prototype.handleClick=function(){var t=this;return null!=this.markerCtrl?this.googleMapsHandles.push(google.maps.event.addListener(this.markerCtrl,"click",function(){var e;return null==t.gWin&&t.createGWin(),e=t.markerCtrl.getPosition(),null!=t.gWin&&(t.gWin.setPosition(e),t.showWindow()),t.initialMarkerVisibility=t.markerCtrl.getVisible(),t.markerCtrl.setVisible(t.isIconVisibleOnClick)})):void 0},o.prototype.showWindow=function(){var t,e=this;return t=function(){return!e.gWin||!e.scope.show&&null!=e.scope.show||e.gWin.isOpen()?void 0:e.gWin.open(e.mapCtrl)},this.scope.templateUrl?this.gWin?this.$http.get(this.scope.templateUrl,{cache:this.$templateCache}).then(function(i){var o,n;return n=e.scope.$new(),angular.isDefined(e.scope.templateParameter)&&(n.parameter=e.scope.templateParameter),o=e.$compile(i.data)(n),e.gWin.setContent(o[0]),t()}):void 0:t()},o.prototype.getLatestPosition=function(){return null!=this.gWin&&null!=this.markerCtrl?this.gWin.setPosition(this.markerCtrl.getPosition()):void 0},o.prototype.hideWindow=function(){return null!=this.gWin&&this.gWin.isOpen()?this.gWin.close():void 0},o.prototype.destroy=function(){var t;return this.hideWindow(),_.each(this.googleMapsHandles,function(t){return google.maps.event.removeListener(t)}),this.googleMapsHandles.length=0,null!=this.scope&&this.needToManualDestroy&&this.scope.$destroy(),delete this.gWin,t=void 0},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.parent",function(){return this.IMarkerParentModel=function(e){function o(e,i,o,n,r){var s,a=this;this.scope=e,this.element=i,this.attrs=o,this.mapCtrl=n,this.$timeout=r,this.linkInit=t(this.linkInit,this),this.onDestroy=t(this.onDestroy,this),this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),this.onTimeOut=t(this.onTimeOut,this),s=this,this.$log=directives.api.utils.Logger,this.validateScope(e)&&(this.doClick=angular.isDefined(o.click),null!=e.options&&(this.DEFAULTS=e.options),this.$timeout(function(){return a.watch("coords",e),a.watch("icon",e),a.watch("options",e),a.onTimeOut(e),e.$on("$destroy",function(){return a.onDestroy(e)})}))}return i(o,e),o.prototype.DEFAULTS={},o.prototype.isFalse=function(t){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(t)},o.prototype.onTimeOut=function(){},o.prototype.validateScope=function(t){var e;return null==t?!1:(e=null!=t.coords,e||this.$log.error(this.constructor.name+": no valid coords attribute found"),e)},o.prototype.watch=function(t,e){var i=this;return e.$watch(t,function(o,n){return o!==n?i.onWatch(t,e,o,n):void 0},!0)},o.prototype.onWatch=function(){throw new Exception("Not Implemented!!")},o.prototype.onDestroy=function(){throw new Exception("Not Implemented!!")},o.prototype.linkInit=function(){throw new Exception("Not Implemented!!")},o}(oo.BaseObject)})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};this.ngGmapModule("directives.api.models.parent",function(){return this.IWindowParentModel=function(t){function i(t,e,i,o,n,r,s,a){var l;l=this,this.$log=directives.api.utils.Logger,this.$timeout=n,this.$compile=r,this.$http=s,this.$templateCache=a,null!=t.options&&(this.DEFAULTS=t.options)}return e(i,t),i.include(directives.api.utils.GmapUtil),i.prototype.DEFAULTS={},i}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.parent",function(){return this.LayerParentModel=function(e){function o(e,i,o,n,r,s,a){var l=this;return this.scope=e,this.element=i,this.attrs=o,this.mapCtrl=n,this.$timeout=r,this.onLayerCreated=null!=s?s:void 0,this.$log=null!=a?a:directives.api.utils.Logger,this.createGoogleLayer=t(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.gMap=void 0,this.doShow=!0,void this.$timeout(function(){return l.gMap=n.getMap(),angular.isDefined(l.attrs.show)&&(l.doShow=l.scope.show),null!==l.doShow&&l.doShow&&null!==l.gMap&&l.layer.setMap(l.gMap),l.scope.$watch("show",function(t,e){return t!==e?(l.doShow=t,l.layer.setMap(t?l.gMap:null)):void 0},!0),l.scope.$watch("options",function(t,e){return t!==e?(l.layer.setMap(null),l.layer=null,l.createGoogleLayer()):void 0},!0),l.scope.$on("$destroy",function(){return l.layer.setMap(null)})}))}return i(o,e),o.prototype.createGoogleLayer=function(){var t=this;return this.layer=null==this.attrs.options?void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),this.$timeout(function(){var e;return null!=t.layer&&null!=t.onLayerCreated&&(e=t.onLayerCreated(t.scope,t.layer))?e(t.layer):void 0})},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.parent",function(){return this.MarkerParentModel=function(e){function o(e,i,n,r,s){this.onDestroy=t(this.onDestroy,this),this.onWatch=t(this.onWatch,this),this.onTimeOut=t(this.onTimeOut,this);var a;o.__super__.constructor.call(this,e,i,n,r,s),a=this}return i(o,e),o.include(directives.api.utils.GmapUtil),o.prototype.onTimeOut=function(t){var e,i=this;return e=this.createMarkerOptions(t.coords,t.icon,t.options,this.mapCtrl.getMap()),this.scope.gMarker=new google.maps.Marker(e),google.maps.event.addListener(this.scope.gMarker,"click",function(){return i.doClick&&null!=t.click?i.$timeout(function(){return i.scope.click()}):void 0}),this.setEvents(this.scope.gMarker,t),this.$log.info(this)},o.prototype.onWatch=function(t,e){switch(t){case"coords":return null!=e.coords&&null!=this.scope.gMarker?(this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(new google.maps.LatLng(e.coords.latitude,e.coords.longitude)),this.scope.gMarker.setVisible(null!=e.coords.latitude&&null!=e.coords.longitude),this.scope.gMarker.setOptions(e.options)):this.scope.gMarker.setMap(null);case"icon":if(null!=e.icon&&null!=e.coords&&null!=this.scope.gMarker)return this.scope.gMarker.setOptions(e.options),this.scope.gMarker.setIcon(e.icon),this.scope.gMarker.setMap(null),this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(new google.maps.LatLng(e.coords.latitude,e.coords.longitude)),this.scope.gMarker.setVisible(e.coords.latitude&&null!=e.coords.longitude);break;case"options":if(null!=e.coords&&null!=e.icon&&e.options)return null!=this.scope.gMarker&&this.scope.gMarker.setMap(null),delete this.scope.gMarker,this.scope.gMarker=new google.maps.Marker(this.createMarkerOptions(e.coords,e.icon,e.options,this.mapCtrl.getMap()))}},o.prototype.onDestroy=function(){var t;return void 0===this.scope.gMarker?void(t=void 0):(this.scope.gMarker.setMap(null),delete this.scope.gMarker,t=void 0)},o.prototype.setEvents=function(t,e){return angular.isDefined(e.events)&&null!=e.events&&angular.isObject(e.events)?_.compact(_.each(e.events,function(i,o){return e.events.hasOwnProperty(o)&&angular.isFunction(e.events[o])?google.maps.event.addListener(t,o,function(){return i.apply(e,[t,o,arguments])}):void 0})):void 0},o}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.parent",function(){return this.MarkersParentModel=function(e){function o(e,i,n,r,s,a){this.fit=t(this.fit,this),this.onDestroy=t(this.onDestroy,this),this.onWatch=t(this.onWatch,this),this.reBuildMarkers=t(this.reBuildMarkers,this),this.createMarkers=t(this.createMarkers,this),this.validateScope=t(this.validateScope,this),this.onTimeOut=t(this.onTimeOut,this);
var l;o.__super__.constructor.call(this,e,i,n,r,s,a),l=this,this.markersIndex=0,this.gMarkerManager=void 0,this.scope=e,this.scope.markerModels=[],this.bigGulp=directives.api.utils.AsyncProcessor,this.$timeout=s,this.$injector=a,this.$log.info(this)}return i(o,e),o.include(directives.api.utils.ModelsWatcher),o.prototype.onTimeOut=function(t){return this.watch("models",t),this.watch("doCluster",t),this.watch("clusterOptions",t),this.watch("fit",t),this.createMarkers(t)},o.prototype.validateScope=function(t){var e;return e=angular.isUndefined(t.models)||void 0===t.models,e&&this.$log.error(this.constructor.name+": no valid models attribute found"),o.__super__.validateScope.call(this,t)||e},o.prototype.createMarkers=function(t){var e,i=this;return null!=t.doCluster&&t.doCluster===!0?null!=t.clusterOptions?void 0===this.gMarkerManager?this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap(),void 0,t.clusterOptions):this.gMarkerManager.opt_options!==t.clusterOptions&&(this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap(),void 0,t.clusterOptions)):this.gMarkerManager=new directives.api.managers.ClustererMarkerManager(this.mapCtrl.getMap()):this.gMarkerManager=new directives.api.managers.MarkerManager(this.mapCtrl.getMap()),e=[],t.isMarkerModelsReady=!1,this.bigGulp.handleLargeArray(t.models,function(o){var n;return t.doRebuild=!0,n=new directives.api.models.child.MarkerChildModel(i.markersIndex,o,t,i.mapCtrl,i.$timeout,i.DEFAULTS,i.doClick,i.gMarkerManager,i.$injector),i.$log.info("child",n,"markers",e),e.push(n),i.markersIndex++},function(){},function(){return i.gMarkerManager.draw(),t.markerModels=e,angular.isDefined(i.attrs.fit)&&null!=t.fit&&t.fit&&i.fit(),t.isMarkerModelsReady=!0,null!=t.onMarkerModelsReady?t.onMarkerModelsReady(t):void 0})},o.prototype.reBuildMarkers=function(t){return t.doRebuild||void 0===t.doRebuild?(_.each(t.markerModels,function(t){return t.destroy()}),this.markersIndex=0,null!=this.gMarkerManager&&this.gMarkerManager.clear(),this.createMarkers(t)):void 0},o.prototype.onWatch=function(t,e,i,o){return"models"!==t||this.didModelsChange(i,o)?"options"===t&&null!=i?void(this.DEFAULTS=i):this.reBuildMarkers(e):void 0},o.prototype.onDestroy=function(t){var e,i,o,n;for(n=t.markerModels,i=0,o=n.length;o>i;i++)e=n[i],e.destroy();return null!=this.gMarkerManager?this.gMarkerManager.clear():void 0},o.prototype.fit=function(){var t,e;return this.mapCtrl&&null!=this.scope.markerModels&&this.scope.markerModels.length>0&&(t=new google.maps.LatLngBounds,e=!1,_.each(this.scope.markerModels,function(i){return null!=i.gMarker?(e||(e=!0),t.extend(i.gMarker.getPosition())):void 0}),e)?this.mapCtrl.getMap().fitBounds(t):void 0},o}(directives.api.models.parent.IMarkerParentModel)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api.models.parent",function(){return this.WindowsParentModel=function(e){function o(e,i,n,r,s,a,l,h,u){this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.createChildScopesWindows=t(this.createChildScopesWindows,this),this.onMarkerModelsReady=t(this.onMarkerModelsReady,this),this.watchOurScope=t(this.watchOurScope,this),this.destroy=t(this.destroy,this),this.watchDestroy=t(this.watchDestroy,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this);var p,c,d,g,f,m=this;for(o.__super__.constructor.call(this,e,i,n,r,s,a,l,h,u),c=this,this.$interpolate=u,this.windows=[],this.windwsIndex=0,this.scopePropNames=["show","coords","templateUrl","templateParameter","isIconVisibleOnClick","closeClick"],f=this.scopePropNames,d=0,g=f.length;g>d;d++)p=f[d],this[p+"Key"]=void 0;this.linked=new directives.api.utils.Linked(e,i,n,r),this.models=void 0,this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.bigGulp=directives.api.utils.AsyncProcessor,this.$log.info(c),this.$timeout(function(){return m.watchOurScope(e),m.createChildScopesWindows()},50)}return i(o,e),o.include(directives.api.utils.ModelsWatcher),o.prototype.watch=function(t,e,i){var o=this;return t.$watch(e,function(t,n){return t!==n?(o[i]="function"==typeof t?t():t,_.each(o.windows,function(t){return t.scope[e]="self"===o[i]?t:t[o[i]]})):void 0},!0)},o.prototype.watchModels=function(t){var e=this;return t.$watch("models",function(t,i){return e.didModelsChange(t,i)?(e.destroy(),e.createChildScopesWindows()):void 0})},o.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){return e.destroy()})},o.prototype.destroy=function(){return _.each(this.windows,function(t){return t.destroy()}),delete this.windows,this.windows=[],this.windowsIndex=0},o.prototype.watchOurScope=function(t){var e=this;return _.each(this.scopePropNames,function(i){var o;return o=i+"Key",e[o]="function"==typeof t[i]?t[i]():t[i],e.watch(t,i,o)})},o.prototype.onMarkerModelsReady=function(t){var e=this;return this.destroy(),this.models=t.models,this.firstTime&&this.watchDestroy(t),this.setContentKeys(t.models),this.bigGulp.handleLargeArray(t.markerModels,function(t){return e.createWindow(t.model,t.gMarker,e.gMap)},function(){},function(){return e.firstTime=!1})},o.prototype.createChildScopesWindows=function(){var t,e,i=this;if(this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),this.gMap=this.linked.ctrls[0].getMap(),t=this.linked.ctrls.length>1&&null!=this.linked.ctrls[1]?this.linked.ctrls[1].getMarkersScope():void 0,e=angular.isUndefined(this.linked.scope.models),e&&(void 0===t||void 0===t.markerModels&&void 0===t.models))return void this.$log.info("No models to create windows from! Need direct models or models derrived from markers!");if(null!=this.gMap){if(null!=this.linked.scope.models)return this.models=this.linked.scope.models,this.firstTime&&(this.watchModels(this.linked.scope),this.watchDestroy(this.linked.scope)),this.setContentKeys(this.linked.scope.models),this.bigGulp.handleLargeArray(this.linked.scope.models,function(t){return i.createWindow(t,void 0,i.gMap)},function(){},function(){return i.firstTime=!1});if(t.onMarkerModelsReady=this.onMarkerModelsReady,t.isMarkerModelsReady)return this.onMarkerModelsReady(t)}},o.prototype.setContentKeys=function(t){return t.length>0?this.contentKeys=Object.keys(t[0]):void 0},o.prototype.createWindow=function(t,e,i){var o,n,r,s=this;return o=this.linked.scope.$new(!1),this.setChildScope(o,t),o.$watch("model",function(t,e){return t!==e?s.setChildScope(o,t):void 0},!0),r=this.interpolateContent(this.linked.element.html(),t),n=this.createWindowOptions(e,o,r,this.DEFAULTS),this.windows.push(new directives.api.models.child.WindowChildModel(o,n,this.isIconVisibleOnClick,i,e,this.$http,this.$templateCache,this.$compile,void 0,!0))},o.prototype.setChildScope=function(t,e){var i,o,n,r,s,a=this;for(s=this.scopePropNames,o=function(i){var o,n;return o=i+"Key",n="self"===a[o]?e:e[a[o]],n!==t[i]?t[i]=n:void 0},n=0,r=s.length;r>n;n++)i=s[n],o(i);return t.model=e},o.prototype.interpolateContent=function(t,e){var i,o,n,r,s,a;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(i=this.$interpolate(t),o={},a=this.contentKeys,r=0,s=a.length;s>r;r++)n=a[r],o[n]=e[n];return i(o)}},o}(directives.api.models.parent.IWindowParentModel)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.ILabel=function(e){function o(e){this.link=t(this.link,this);var i;i=this,this.restrict="ECMA",this.replace=!0,this.template=void 0,this.require=void 0,this.transclude=!0,this.priority=-100,this.scope={labelContent:"=content",labelAnchor:"@anchor",labelClass:"@class",labelStyle:"=style"},this.$log=directives.api.utils.Logger,this.$timeout=e}return i(o,e),o.prototype.link=function(){throw new Exception("Not Implemented!!")},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.IMarker=function(e){function o(e){this.link=t(this.link,this);var i;i=this,this.$log=directives.api.utils.Logger,this.$timeout=e,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events"}}return i(o,e),o.prototype.controller=["$scope","$element",function(){throw new Exception("Not Implemented!!")}],o.prototype.link=function(){throw new Exception("Not implemented!!")},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.IWindow=function(e){function o(e,i,o,n){var r;this.$timeout=e,this.$compile=i,this.$http=o,this.$templateCache=n,this.link=t(this.link,this),r=this,this.restrict="ECMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require=void 0,this.replace=!0,this.scope={coords:"=coords",show:"=show",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options"},this.$log=directives.api.utils.Logger}return i(o,e),o.include(directives.api.utils.ChildEvents),o.prototype.link=function(){throw new Exception("Not Implemented!!")},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.Label=function(e){function o(e){this.link=t(this.link,this);var i;o.__super__.constructor.call(this,e),i=this,this.require="^marker",this.template='<span class="angular-google-maps-marker-label" ng-transclude></span>',this.$log.info(this)}return i(o,e),o.prototype.link=function(t,e,i,o){return this.$timeout(function(){var e,i;return i=o.getMarkerScope().gMarker,null!=i&&(e=new directives.api.models.child.MarkerLabelChildModel(i,t)),t.$on("$destroy",function(){return e.destroy()})},directives.api.utils.GmapUtil.defaultDelay+25)},o}(directives.api.ILabel)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.Layer=function(e){function o(e){this.$timeout=e,this.link=t(this.link,this),this.$log=directives.api.utils.Logger,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return i(o,e),o.prototype.link=function(t,e,i,o){return null!=i.oncreated?new directives.api.models.parent.LayerParentModel(t,e,i,o,this.$timeout,t.onCreated):new directives.api.models.parent.LayerParentModel(t,e,i,o,this.$timeout)},o}(oo.BaseObject)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.Marker=function(e){function o(e){this.link=t(this.link,this);var i;o.__super__.constructor.call(this,e),i=this,this.template='<span class="angular-google-map-marker" ng-transclude></span>',this.$log.info(this)}return i(o,e),o.prototype.controller=["$scope","$element",function(t){return{getMarkerScope:function(){return t}}}],o.prototype.link=function(t,e,i,o){return new directives.api.models.parent.MarkerParentModel(t,e,i,o,this.$timeout)},o}(directives.api.IMarker)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.Markers=function(e){function o(e,i){this.link=t(this.link,this);var n;o.__super__.constructor.call(this,e),n=this,this.template='<span class="angular-google-map-markers" ng-transclude></span>',this.scope.models="=models",this.scope.doCluster="=docluster",this.scope.clusterOptions="=clusteroptions",this.scope.fit="=fit",this.scope.labelContent="=labelcontent",this.scope.labelAnchor="@labelanchor",this.scope.labelClass="@labelclass",this.$timeout=e,this.$injector=i,this.$log.info(this)}return i(o,e),o.prototype.controller=["$scope","$element",function(t){return{getMarkersScope:function(){return t}}}],o.prototype.link=function(t,e,i,o){return new directives.api.models.parent.MarkersParentModel(t,e,i,o,this.$timeout,this.$injector)},o}(directives.api.IMarker)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.Window=function(e){function o(e,i,n,r){this.link=t(this.link,this);var s;o.__super__.constructor.call(this,e,i,n,r),s=this,this.require=["^googleMap","^?marker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',this.$log.info(s)}return i(o,e),o.include(directives.api.utils.GmapUtil),o.prototype.link=function(t,e,i,o){var n=this;return this.$timeout(function(){var r,s,a,l,h,u,p,c;return a=!0,angular.isDefined(i.isiconvisibleonclick)&&(a=t.isIconVisibleOnClick),l=o[0].getMap(),h=o.length>1&&null!=o[1]?o[1].getMarkerScope().gMarker:void 0,r=null!=t.options?t.options:{},s=null!=t&&null!=t.coords&&null!=t.coords.latitude&&null!=t.coords.longitude,p=s?n.createWindowOptions(h,t,e.html(),r):r,null!=l&&(c=new directives.api.models.child.WindowChildModel(t,p,a,l,h,n.$http,n.$templateCache,n.$compile,e)),t.$on("$destroy",function(){return c.destroy()}),null!=o[1]&&(u=o[1].getMarkerScope(),u.$watch("coords",function(t){return null==t?c.hideWindow():void 0}),u.$watch("coords.latitude",function(t,e){return t!==e?c.getLatestPosition():void 0})),null!=n.onChildCreation&&null!=c?n.onChildCreation(c):void 0},directives.api.utils.GmapUtil.defaultDelay+25)},o}(directives.api.IWindow)})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};this.ngGmapModule("directives.api",function(){return this.Windows=function(e){function o(e,i,n,r,s){this.link=t(this.link,this);var a;o.__super__.constructor.call(this,e,i,n,r),a=this,this.$interpolate=s,this.require=["^googleMap","^?markers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',this.scope.models="=models",this.$log.info(a)}return i(o,e),o.prototype.link=function(t,e,i,o){return new directives.api.models.parent.WindowsParentModel(t,e,i,o,this.$timeout,this.$compile,this.$http,this.$templateCache,this.$interpolate)},o}(directives.api.IWindow)})}.call(this),function(){angular.module("google-maps").directive("googleMap",["$log","$timeout",function(t){"use strict";var e,i,o;return o=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},directives.api.utils.Logger.logger=t,e={mapTypeId:google.maps.MapTypeId.ROADMAP},i=function(t){return new google.maps.LatLng(t.latitude,t.longitude)},{self:this,restrict:"ECMA",transclude:!0,replace:!1,template:'<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',scope:{center:"=center",zoom:"=zoom",dragging:"=dragging",control:"=",windows:"=windows",options:"=options",events:"=events",styles:"=styles",bounds:"=bounds"},controller:["$scope",function(t){return{getMap:function(){return t.map}}}],link:function(n,r,s){var a,l,h,u,p,c,d,g;if(!angular.isDefined(n.center)||!angular.isDefined(n.center.latitude)||!angular.isDefined(n.center.longitude))return void t.error("angular-google-maps: could not find a valid center property");if(!angular.isDefined(n.zoom))return void t.error("angular-google-maps: map zoom property not set");if(l=angular.element(r),l.addClass("angular-google-map"),p={options:{}},s.options&&(p.options=n.options),s.styles&&(p.styles=n.styles),s.type&&(d=s.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(d)?p.mapTypeId=google.maps.MapTypeId[s.type.toUpperCase()]:t.error('angular-google-maps: invalid map type "'+s.type+'"')),g=new google.maps.Map(l.find("div")[1],angular.extend({},e,p,{center:new google.maps.LatLng(n.center.latitude,n.center.longitude),draggable:o(s.draggable),zoom:n.zoom,bounds:n.bounds})),a=!1,google.maps.event.addListener(g,"dragstart",function(){return a=!0,_.defer(function(){return n.$apply(function(t){return null!=t.dragging?t.dragging=a:void 0})})}),google.maps.event.addListener(g,"dragend",function(){return a=!1,_.defer(function(){return n.$apply(function(t){return null!=t.dragging?t.dragging=a:void 0})})}),google.maps.event.addListener(g,"drag",function(){var t;return t=g.center,_.defer(function(){return n.$apply(function(e){return e.center.latitude=t.lat(),e.center.longitude=t.lng()})})}),google.maps.event.addListener(g,"zoom_changed",function(){return n.zoom!==g.zoom?_.defer(function(){return n.$apply(function(t){return t.zoom=g.zoom})}):void 0}),c=!1,google.maps.event.addListener(g,"center_changed",function(){var t;return t=g.center,c?void 0:_.defer(function(){return n.$apply(function(e){return g.dragging||(e.center.latitude!==t.lat()&&(e.center.latitude=t.lat()),e.center.longitude===t.lng())?void 0:e.center.longitude=t.lng()})})}),google.maps.event.addListener(g,"idle",function(){var t,e,i;return t=g.getBounds(),e=t.getNorthEast(),i=t.getSouthWest(),_.defer(function(){return n.$apply(function(t){return null!==t.bounds&&void 0!==t.bounds&&void 0!==t.bounds?(t.bounds.northeast={latitude:e.lat(),longitude:e.lng()},t.bounds.southwest={latitude:i.lat(),longitude:i.lng()}):void 0})})}),angular.isDefined(n.events)&&null!==n.events&&angular.isObject(n.events)){u=function(t){return function(){return n.events[t].apply(n,[g,t,arguments])}};for(h in n.events)n.events.hasOwnProperty(h)&&angular.isFunction(n.events[h])&&google.maps.event.addListener(g,h,u(h))}return n.map=g,null!=s.control&&null!=n.control&&(n.control.refresh=function(t){var e;return null!=g?(google.maps.event.trigger(g,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.latitude:void 0)?(e=i(t),o(s.pan)?g.panTo(e):g.setCenter(e)):void 0):void 0},n.control.getGMap=function(){return g}),n.$watch("center",function(e,r){var l;return l=i(e),e===r||l.lat()===g.center.lat()&&l.lng()===g.center.lng()?void 0:(c=!0,a||((null==e.latitude||null==e.longitude)&&t.error("Invalid center for newValue: "+JSON.stringify(e)),o(s.pan)&&n.zoom===g.zoom?g.panTo(l):g.setCenter(l)),c=!1)},!0),n.$watch("zoom",function(t,e){return t!==e&&t!==g.zoom?_.defer(function(){return g.setZoom(t)}):void 0}),n.$watch("bounds",function(e,i){var o,n,r;return e!==i?null==e.northeast.latitude||null==e.northeast.longitude||null==e.southwest.latitude||null==e.southwest.longitude?void t.error("Invalid map bounds for new value: "+JSON.stringify(e)):(n=new google.maps.LatLng(e.northeast.latitude,e.northeast.longitude),r=new google.maps.LatLng(e.southwest.latitude,e.southwest.longitude),o=new google.maps.LatLngBounds(r,n),g.fitBounds(o)):void 0}),n.$watch("options",function(t,e){return _.isEqual(t,e)||(p.options=t,null==g)?void 0:g.setOptions(p)},!0),n.$watch("styles",function(t,e){return _.isEqual(t,e)||(p.styles=t,null==g)?void 0:g.setOptions(p)},!0)}}}])}.call(this),function(){angular.module("google-maps").directive("marker",["$timeout",function(t){return new directives.api.Marker(t)}])}.call(this),function(){angular.module("google-maps").directive("markers",["$timeout","$injector",function(t,e){return new directives.api.Markers(t,e)}])}.call(this),function(){angular.module("google-maps").directive("markerLabel",["$log","$timeout",function(t,e){return new directives.api.Label(e)}])}.call(this),function(){angular.module("google-maps").directive("polygon",["$log","$timeout",function(t,e){var i,o,n,r,s;return s=function(t){var e;for(e=0;e<t.length;){if(angular.isUndefined(t[e].latitude)||angular.isUndefined(t[e].longitude))return!1;e++}return!0},o=function(t){var e,i;for(i=new google.maps.MVCArray,e=0;e<t.length;)i.push(new google.maps.LatLng(t[e].latitude,t[e].longitude)),e++;return i},n=function(t,e){var i,o;for(i=new google.maps.LatLngBounds,o=0;o<e.length;)i.extend(e.getAt(o)),o++;return t.fitBounds(i)},r=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},i={},{restrict:"ECA",require:"^googleMap",replace:!0,scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"="},link:function(a,l,h,u){return angular.isUndefined(a.path)||null===a.path||a.path.length<2||!s(a.path)?void t.error("polyline: no valid path attribute found"):e(function(){var t,e,s,l,p,c,d,g;return t=u.getMap(),l=o(a.path),e=angular.extend({},i,{map:t,path:l,strokeColor:a.stroke&&a.stroke.color,strokeOpacity:a.stroke&&a.stroke.opacity,strokeWeight:a.stroke&&a.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(t,i){return e[i]=angular.isUndefined(a[i])||null===a[i]?t:a[i]}),g=new google.maps.Polyline(e),r(h.fit)&&n(t,l),angular.isDefined(a.editable)&&a.$watch("editable",function(t){return g.setEditable(t)}),angular.isDefined(a.draggable)&&a.$watch("draggable",function(t){return g.setDraggable(t)}),angular.isDefined(a.visible)&&a.$watch("visible",function(t){return g.setVisible(t)}),c=void 0,s=void 0,p=void 0,d=g.getPath(),c=google.maps.event.addListener(d,"set_at",function(t){var e;return e=d.getAt(t),e&&e.lng&&e.lat?(a.path[t].latitude=e.lat(),a.path[t].longitude=e.lng(),a.$apply()):void 0}),s=google.maps.event.addListener(d,"insert_at",function(t){var e;return e=d.getAt(t),e&&e.lng&&e.lat?(a.path.splice(t,0,{latitude:e.lat(),longitude:e.lng()}),a.$apply()):void 0}),p=google.maps.event.addListener(d,"remove_at",function(t){return a.path.splice(t,1),a.$apply()}),a.$watch("path",function(e){var i,o,s,a,l,u,p;if(l=g.getPath(),e!==l){if(!e)return g.setMap(null);for(g.setMap(t),i=0,u=l.getLength(),s=e.length,o=Math.min(u,s);o>i;)p=l.getAt(i),a=e[i],(p.lat()!==a.latitude||p.lng()!==a.longitude)&&l.setAt(i,new google.maps.LatLng(a.latitude,a.longitude)),i++;for(;s>i;)a=e[i],l.push(new google.maps.LatLng(a.latitude,a.longitude)),i++;for(;u>i;)l.pop(),i++;if(r(h.fit))return n(t,l)}},!0),a.$on("$destroy",function(){return g.setMap(null),c(),c=null,s(),s=null,p(),p=null})})}}}])}.call(this),function(){angular.module("google-maps").directive("polyline",["$log","$timeout","array-sync",function(t,e,i){var o,n,r,s,a;return a=function(t){var e;for(e=0;e<t.length;){if(angular.isUndefined(t[e].latitude)||angular.isUndefined(t[e].longitude))return!1;e++}return!0},n=function(t){var e,i;for(i=new google.maps.MVCArray,e=0;e<t.length;)i.push(new google.maps.LatLng(t[e].latitude,t[e].longitude)),e++;return i},r=function(t,e){var i,o;for(i=new google.maps.LatLngBounds,o=0;o<e.length;)i.extend(e.getAt(o)),o++;return t.fitBounds(i)},s=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},o={},{restrict:"ECA",replace:!0,require:"^googleMap",scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"="},link:function(l,h,u,p){return angular.isUndefined(l.path)||null===l.path||l.path.length<2||!a(l.path)?void t.error("polyline: no valid path attribute found"):e(function(){var t,e,a,h;return e=function(t){var e;return e=angular.extend({},o,{map:a,path:t,strokeColor:l.stroke&&l.stroke.color,strokeOpacity:l.stroke&&l.stroke.opacity,strokeWeight:l.stroke&&l.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(t,i){return e[i]=angular.isUndefined(l[i])||null===l[i]?t:l[i]}),e},a=p.getMap(),h=new google.maps.Polyline(e(n(l.path))),s(u.fit)&&r(a,pathPoints),angular.isDefined(l.editable)&&l.$watch("editable",function(t){return h.setEditable(t)}),angular.isDefined(l.draggable)&&l.$watch("draggable",function(t){return h.setDraggable(t)}),angular.isDefined(l.visible)&&l.$watch("visible",function(t){return h.setVisible(t)}),angular.isDefined(l.geodesic)&&l.$watch("geodesic",function(){return h.setOptions(e(h.getPath()))}),angular.isDefined(l.stroke)&&angular.isDefined(l.stroke.weight)&&l.$watch("stroke.weight",function(){return h.setOptions(e(h.getPath()))}),angular.isDefined(l.stroke)&&angular.isDefined(l.stroke.color)&&l.$watch("stroke.color",function(){return h.setOptions(e(h.getPath()))}),t=i(h.getPath(),l,"path"),l.$on("$destroy",function(){return h.setMap(null),t?(t(),t=null):void 0})})}}}])}.call(this),function(){angular.module("google-maps").directive("window",["$timeout","$compile","$http","$templateCache",function(t,e,i,o){return new directives.api.Window(t,e,i,o)}])}.call(this),function(){angular.module("google-maps").directive("windows",["$timeout","$compile","$http","$templateCache","$interpolate",function(t,e,i,o,n){return new directives.api.Windows(t,e,i,o,n)}])}.call(this),function(){angular.module("google-maps").directive("layer",["$timeout",function(t){return new directives.api.Layer(t)}])}.call(this),InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var t,e,i,o=this,n=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},r=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),o.enableEventPropagation_||n(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],n));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},InfoBox.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},InfoBox.prototype.panBox_=function(t){var e,i,o=0,n=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),i=e.getBounds();var r=e.getDiv(),s=r.offsetWidth,a=r.offsetHeight,l=this.pixelOffset_.width,h=this.pixelOffset_.height,u=this.div_.offsetWidth,p=this.div_.offsetHeight,c=this.infoBoxClearance_.width,d=this.infoBoxClearance_.height,g=this.getProjection().fromLatLngToContainerPixel(this.position_);g.x<-l+c?o=g.x+l-c:g.x+u+l+c>s&&(o=g.x+u+l+c-s),this.alignBottom_?g.y<-h+d+p?n=g.y+h-d-p:g.y+h+d>a&&(n=g.y+h+d-a):g.y<-h+d?n=g.y+h-d:g.y+p+h+d>a&&(n=g.y+p+h+d-a),(0!==o||0!==n)&&(e.getCenter(),e.panBy(o,n))}},InfoBox.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.div_.style.visibility=this.isHidden_?"hidden":"visible"},InfoBox.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")
},InfoBox.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){var t;return t="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(t,e){var i=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},ClusterIcon.prototype.onAdd=function(){var t,e,i=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(o){if(t=!1,!e){var n,r,s=i.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",i.cluster_),google.maps.event.trigger(s,"clusterclick",i.cluster_),s.getZoomOnClick()&&(r=s.getMaxZoom(),n=i.cluster_.getBounds(),s.getMap().fitBounds(n),setTimeout(function(){s.getMap().fitBounds(n),null!==r&&s.getMap().getZoom()>r&&s.getMap().setZoom(r+1)},100)),o.cancelBubble=!0,o.stopPropagation&&o.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",i.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",i.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),i=parseInt(e[0].trim(),10),o=parseInt(e[1].trim(),10),n=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(n),t="<img src='"+this.url_+"' style='position: absolute; top: "+o+"px; left: "+i+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*o+"px, "+(-1*i+this.width_)+"px, "+(-1*o+this.height_)+"px, "+-1*i+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var i=this.styles_[e];this.url_=i.url,this.height_=i.height,this.width_=i.width,this.anchorText_=i.anchorText||[0,0],this.anchorIcon_=i.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=i.textColor||"black",this.textSize_=i.textSize||11,this.textDecoration_=i.textDecoration||"none",this.fontWeight_=i.fontWeight||"bold",this.fontStyle_=i.fontStyle||"normal",this.fontFamily_=i.fontFamily||"Arial,sans-serif",this.backgroundPosition_=i.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(t){this.center_=t},ClusterIcon.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers();for(t=0;t<i.length;t++)e.extend(i[t].getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(t){var e,i,o;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var n=this.markers_.length+1,r=(this.center_.lat()*(n-1)+t.getPosition().lat())/n,s=(this.center_.lng()*(n-1)+t.getPosition().lng())/n;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),i=this.markers_.length,o=this.markerClusterer_.getMaxZoom(),null!==o&&this.map_.getZoom()>o)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i===this.minClusterSize_)for(e=0;i>e;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},Cluster.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(o),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),i=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)i.extend(e[t].getPosition());this.getMap().fitBounds(i)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(t){this.styles_=t},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(t){this.title_=t},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(t){this.averageCenter_=t},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},MarkerClusterer.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(t){this.imageExtension_=t},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(t){this.imagePath_=t},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(t){this.imageSizes_=t},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(t){this.clusterClass_=t},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&this.pushMarkerTo_(t[i]);e||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},MarkerClusterer.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!e&&i&&this.repaint(),i},MarkerClusterer.prototype.removeMarkers=function(t,e){var i,o,n=!1;for(i=0;i<t.length;i++)o=this.removeMarker_(t[i]),n=n||o;return!e&&n&&this.repaint(),n},MarkerClusterer.prototype.removeMarker_=function(t){var e,i=-1;if(this.markers_.indexOf)i=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){i=e;break}return-1===i?!1:(t.setMap(null),this.markers_.splice(i,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),o=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),n=e.fromLatLngToDivPixel(i);n.x+=this.gridSize_,n.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(o);r.x-=this.gridSize_,r.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(n),a=e.fromDivPixelToLatLng(r);return t.extend(s),t.extend(a),t},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(t){var e,i;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)i=this.markers_[e],i.isAdded=!1,t&&i.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){var i=6371,o=(e.lat()-t.lat())*Math.PI/180,n=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),a=i*s;return a},MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(t){var e,i,o,n,r=4e4,s=null;for(e=0;e<this.clusters_.length;e++)o=this.clusters_[e],n=o.getCenter(),n&&(i=this.distanceBetweenPoints_(n,t.getPosition()),r>i&&(r=i,s=o));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(o=new Cluster(this),o.addMarker(t),this.clusters_.push(o))},MarkerClusterer.prototype.createClusters_=function(t){var e,i,o,n=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),o=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(o),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)i=this.markers_[e],!i.isAdded&&this.isMarkerInBounds_(i,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);s<this.markers_.length?this.timerRefStatic=setTimeout(function(){n.createClusters_(s)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},MarkerClusterer.CALCULATOR=function(t,e){for(var i=0,o="",n=t.length.toString(),r=n;0!==r;)r=parseInt(r/10,10),i++;return i=Math.min(i,e),{text:n,index:i,title:o}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(t){var e;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,MarkerLabel_.getSharedCross.crossDiv=e),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var t,e,i,o,n,r,s,a=this,l=!1,h=!1,u=20,p="url("+this.handCursorURL_+")",c=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},d=function(){a.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(a.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!a.marker_.getDraggable()&&!a.marker_.getClickable()||h||(this.style.cursor=a.marker_.getCursor(),google.maps.event.trigger(a.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){h=!1,a.marker_.getDraggable()&&(l=!0,this.style.cursor=p),(a.marker_.getDraggable()||a.marker_.getClickable())&&(google.maps.event.trigger(a.marker_,"mousedown",t),c(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var i;if(l&&(l=!1,a.eventDiv_.style.cursor="pointer",google.maps.event.trigger(a.marker_,"mouseup",e)),h){if(n){i=a.getProjection().fromLatLngToDivPixel(a.marker_.getPosition()),i.y+=u,a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(i));try{a.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(d,1406)}catch(r){}}a.crossDiv_.style.display="none",a.marker_.setZIndex(t),o=!0,h=!1,e.latLng=a.marker_.getPosition(),google.maps.event.trigger(a.marker_,"dragend",e)}}),google.maps.event.addListener(a.marker_.getMap(),"mousemove",function(o){var p;l&&(h?(o.latLng=new google.maps.LatLng(o.latLng.lat()-e,o.latLng.lng()-i),p=a.getProjection().fromLatLngToDivPixel(o.latLng),n&&(a.crossDiv_.style.left=p.x+"px",a.crossDiv_.style.top=p.y+"px",a.crossDiv_.style.display="",p.y-=u),a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(p)),n&&(a.eventDiv_.style.top=p.y+u+"px"),google.maps.event.trigger(a.marker_,"drag",o)):(e=o.latLng.lat()-a.marker_.getPosition().lat(),i=o.latLng.lng()-a.marker_.getPosition().lng(),t=a.marker_.getZIndex(),r=a.marker_.getPosition(),s=a.marker_.getMap().getCenter(),n=a.marker_.get("raiseOnDrag"),h=!0,a.marker_.setZIndex(1e6),o.latLng=a.marker_.getPosition(),google.maps.event.trigger(a.marker_,"dragstart",o)))}),google.maps.event.addDomListener(document,"keydown",function(t){h&&27===t.keyCode&&(n=!1,a.marker_.setPosition(r),a.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(o?o=!1:(google.maps.event.trigger(a.marker_,"click",t),c(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(google.maps.event.trigger(a.marker_,"dblclick",t),c(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(){h||(n=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(){h||n&&(a.setPosition(u),a.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(){h||n&&a.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){a.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){a.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){a.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){a.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){a.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){a.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){a.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){a.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){a.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var t;for(null!==this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!==this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},MarkerLabel_.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.labelDiv_.style.display=this.marker_.get("labelVisible")&&this.marker_.getVisible()?"block":"none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)};